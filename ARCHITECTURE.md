# ğŸ—ï¸ ArtIntellect æ¶æ„è¯¦è§£

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢å±‚ (Frontend)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Single HTML File (index.html)                         â”‚  â”‚
â”‚  â”‚  â€¢ Tailwind CSS (å“åº”å¼è®¾è®¡)                            â”‚  â”‚
â”‚  â”‚  â€¢ Vanilla JavaScript (ES6+)                           â”‚  â”‚
â”‚  â”‚  â€¢ æ·±è‰²/æµ…è‰²æ¨¡å¼                                         â”‚  â”‚
â”‚  â”‚  â€¢ å®æ—¶æµå¼å“åº”                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ HTTP/REST API + SSE
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API å±‚ (FastAPI Backend)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  main.py - FastAPI åº”ç”¨                                â”‚  â”‚
â”‚  â”‚  â€¢ è·¯ç”±ç®¡ç†                                             â”‚  â”‚
â”‚  â”‚  â€¢ è¯·æ±‚éªŒè¯ (Pydantic)                                  â”‚  â”‚
â”‚  â”‚  â€¢ å¼‚æ­¥å¤„ç†                                             â”‚  â”‚
â”‚  â”‚  â€¢ æµå¼å“åº” (SSE)                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æœåŠ¡å±‚ (Services)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  config.py - ConfigService                             â”‚  â”‚
â”‚  â”‚  â€¢ ç¯å¢ƒå˜é‡ç®¡ç†                                          â”‚  â”‚
â”‚  â”‚  â€¢ OpenAI å®¢æˆ·ç«¯åˆå§‹åŒ–                                   â”‚  â”‚
â”‚  â”‚  â€¢ å…¨å±€é…ç½®                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  database.py - Database Service                        â”‚  â”‚
â”‚  â”‚  â€¢ SQLite æ“ä½œå°è£…                                       â”‚  â”‚
â”‚  â”‚  â€¢ äº‹åŠ¡ç®¡ç†                                              â”‚  â”‚
â”‚  â”‚  â€¢ æ•°æ®æŒä¹…åŒ–                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Agent å±‚ (Intelligent Agents)                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  SearchAgent (agents/search_agent.py)        â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ å¹¶å‘æœç´¢ arXiv                        â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ å¼‚æ­¥ HTTP è¯·æ±‚ (httpx)                â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ XML è§£æ                              â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ è®ºæ–‡æ•°æ®æå–                           â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  IndexingAgent (agents/indexing_agent.py)    â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ æ„å»ºå‘é‡ç´¢å¼•                           â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ æ‰¹é‡å¤„ç†                               â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ è¯­ä¹‰æœç´¢                               â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ ç›¸ä¼¼åº¦è®¡ç®—                             â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  TranslationAgent (agents/translation_agent.py)â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ LLM ç¿»è¯‘                              â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ æµå¼å“åº”                               â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ â€¢ æ‰¹é‡ç¿»è¯‘                               â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  QAAgent (agents/qa_agent.py)                â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚ RAG Pipeline:                          â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ 1. Retrieve (æ£€ç´¢ç›¸å…³è®ºæ–‡)              â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ 2. Augment (æ„å»ºä¸Šä¸‹æ–‡)                 â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ 3. Generate (LLM ç”Ÿæˆç­”æ¡ˆ)              â”‚  â”‚           â”‚
â”‚  â”‚  â”‚ 4. Cite (å¼•ç”¨æ¥æº)                      â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚             â”‚          â”‚
            â”‚              â”‚             â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite DB      â”‚ â”‚ ChromaDB  â”‚ â”‚ arXiv  â”‚ â”‚ ModelScope  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚  API   â”‚ â”‚    API      â”‚
â”‚ â”‚ papers       â”‚ â”‚ â”‚â”‚ vectors â”‚â”‚ â”‚        â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ topics       â”‚ â”‚ â”‚â”‚metadata â”‚â”‚ â”‚        â”‚ â”‚ â”‚ Qwen    â”‚ â”‚
â”‚ â”‚ favorites    â”‚ â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚        â”‚ â”‚ â”‚ Models  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”˜
â”‚ è®ºæ–‡å…ƒæ•°æ®        â”‚ â”‚  å‘é‡æ£€ç´¢   â”‚  è®ºæ–‡æº     â”‚   LLM æœåŠ¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµ

### 1. è®ºæ–‡è·å–æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"è·å–æœ€æ–°è®ºæ–‡"
    â”‚
    â–¼
GET /api/arxiv/fetch-all
    â”‚
    â–¼
SearchAgent.fetch_and_save_all()
    â”‚
    â”œâ”€â–º å¹¶å‘è·å–æ‰€æœ‰ä¸»é¢˜ (asyncio.gather)
    â”‚   â”œâ”€â–º Topic 1 â†’ arXiv API
    â”‚   â”œâ”€â–º Topic 2 â†’ arXiv API
    â”‚   â””â”€â–º Topic 3 â†’ arXiv API
    â”‚
    â”œâ”€â–º è§£æ XML å“åº”
    â”‚
    â”œâ”€â–º ä¿å­˜åˆ° SQLite
    â”‚
    â””â”€â–º åå°ä»»åŠ¡: IndexingAgent.index_unindexed_papers()
        â”‚
        â”œâ”€â–º è·å–æœªç´¢å¼•è®ºæ–‡
        â”‚
        â”œâ”€â–º ç”Ÿæˆ embeddings
        â”‚
        â””â”€â–º å­˜å…¥ ChromaDB
```

### 2. æ™ºèƒ½é—®ç­”æµç¨‹ (RAG)

```
ç”¨æˆ·è¾“å…¥é—®é¢˜
    â”‚
    â–¼
POST /api/qa/ask-stream
    â”‚
    â–¼
QAAgent.answer_stream()
    â”‚
    â”œâ”€â–º 1. Retrieve (æ£€ç´¢)
    â”‚   â”‚
    â”‚   â””â”€â–º IndexingAgent.search(question)
    â”‚       â”‚
    â”‚       â””â”€â–º ChromaDB.query()
    â”‚           â”œâ”€â–º å°†é—®é¢˜è½¬æ¢ä¸º embedding
    â”‚           â”œâ”€â–º ç›¸ä¼¼åº¦æœç´¢
    â”‚           â””â”€â–º è¿”å› Top-K ç›¸å…³è®ºæ–‡
    â”‚
    â”œâ”€â–º 2. Augment (å¢å¼º)
    â”‚   â”‚
    â”‚   â””â”€â–º æ„å»º Prompt:
    â”‚       â”œâ”€â–º System: "ä½ æ˜¯ç§‘ç ”åŠ©ç†"
    â”‚       â”œâ”€â–º Context: è®ºæ–‡æ‘˜è¦
    â”‚       â””â”€â–º Question: ç”¨æˆ·é—®é¢˜
    â”‚
    â”œâ”€â–º 3. Generate (ç”Ÿæˆ)
    â”‚   â”‚
    â”‚   â””â”€â–º OpenAI.chat.completions.create(stream=True)
    â”‚       â”‚
    â”‚       â””â”€â–º ModelScope API
    â”‚           â””â”€â–º Qwen æ¨¡å‹
    â”‚
    â””â”€â–º 4. Stream Response (æµå¼è¿”å›)
        â”‚
        â”œâ”€â–º SSE: sources (æ¥æº)
        â”œâ”€â–º SSE: answer chunk 1
        â”œâ”€â–º SSE: answer chunk 2
        â””â”€â–º SSE: answer chunk N
```

### 3. ç¿»è¯‘æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"ç¿»è¯‘"æŒ‰é’®
    â”‚
    â–¼
POST /api/translate
    â”‚
    â–¼
TranslationAgent.translate(text)
    â”‚
    â”œâ”€â–º æ„å»ºç¿»è¯‘ Prompt
    â”‚
    â”œâ”€â–º OpenAI.chat.completions.create(stream=True)
    â”‚   â”‚
    â”‚   â””â”€â–º ModelScope API â†’ Qwen æ¨¡å‹
    â”‚
    â””â”€â–º è¿”å›ä¸­æ–‡ç¿»è¯‘
```

## å…³é”®æŠ€æœ¯ç‰¹æ€§

### 1. å¼‚æ­¥å¹¶å‘ä¼˜åŒ–

- **httpx.AsyncClient**: å¼‚æ­¥ HTTP è¯·æ±‚
- **asyncio.gather**: å¹¶å‘å¤„ç†å¤šä¸ªä»»åŠ¡
- **FastAPI å¼‚æ­¥è·¯ç”±**: éé˜»å¡ I/O

### 2. RAG æ¶æ„

- **å‘é‡æ£€ç´¢**: ChromaDB è¯­ä¹‰æœç´¢
- **ä¸Šä¸‹æ–‡å¢å¼º**: åŠ¨æ€æ„å»º Prompt
- **LLM ç”Ÿæˆ**: åŸºäºæ£€ç´¢ç»“æœçš„å‡†ç¡®å›ç­”

### 3. æµå¼å“åº”

- **SSE (Server-Sent Events)**: å®æ—¶æ¨é€ç­”æ¡ˆ
- **Streaming API**: é€å­—è¿”å›ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### 4. æ•°æ®æŒä¹…åŒ–

- **SQLite**: è½»é‡çº§å…³ç³»æ•°æ®åº“
- **ChromaDB**: æŒä¹…åŒ–å‘é‡å­˜å‚¨
- **äº‹åŠ¡ç®¡ç†**: ä¿è¯æ•°æ®ä¸€è‡´æ€§

## æ‰©å±•æ€§è®¾è®¡

### æ·»åŠ æ–° Agent

```python
# agents/new_agent.py
class NewAgent:
    def __init__(self):
        self.client = config.get_client()
    
    def process(self, data):
        # å¤„ç†é€»è¾‘
        pass

# main.py
from agents import NewAgent
new_agent = NewAgent()

@app.post("/api/new-feature")
async def new_feature():
    return new_agent.process()
```

### æ›´æ¢å‘é‡æ•°æ®åº“

```python
# agents/indexing_agent.py
# ä» ChromaDB åˆ‡æ¢åˆ° FAISS
import faiss

class IndexingAgent:
    def __init__(self):
        # ä½¿ç”¨ FAISS æ›¿ä»£ ChromaDB
        self.index = faiss.IndexFlatL2(dimension)
```

### è‡ªå®šä¹‰åµŒå…¥æ¨¡å‹

```python
from chromadb.utils import embedding_functions

ef = embedding_functions.SentenceTransformerEmbeddingFunction(
    model_name="BAAI/bge-large-zh-v1.5"  # ä¸­æ–‡åµŒå…¥æ¨¡å‹
)

self.collection = self.client.get_or_create_collection(
    embedding_function=ef
)
```

## æ€§èƒ½ä¼˜åŒ–

1. **å¹¶å‘è·å–**: å¤šä¸»é¢˜åŒæ—¶è¯·æ±‚ arXiv API
2. **æ‰¹é‡ç´¢å¼•**: ä¸€æ¬¡å¤„ç†å¤šç¯‡è®ºæ–‡çš„å‘é‡åŒ–
3. **è¿æ¥æ± **: httpx è‡ªåŠ¨ç®¡ç†è¿æ¥å¤ç”¨
4. **æƒ°æ€§åŠ è½½**: æŒ‰éœ€åŠ è½½å¤§æ•°æ®
5. **æµå¼ä¼ è¾“**: å‡å°‘é¦–å­—èŠ‚æ—¶é—´ (TTFB)

## å®‰å…¨è€ƒè™‘

1. **API Key ç®¡ç†**: é€šè¿‡ .env æ–‡ä»¶éš”ç¦»æ•æ„Ÿä¿¡æ¯
2. **è¾“å…¥éªŒè¯**: Pydantic æ¨¡å‹éªŒè¯æ‰€æœ‰è¾“å…¥
3. **é”™è¯¯å¤„ç†**: å®Œæ•´çš„å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•
4. **CORS é…ç½®**: æ§åˆ¶è·¨åŸŸè®¿é—®æƒé™
